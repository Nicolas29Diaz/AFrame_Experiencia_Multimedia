<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" media="screen" href="resources/Inside/inside_style.css">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Raleway&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <script src="https://aframe.io/releases/1.1.0/aframe.min.js"></script>
    <script
        src="https://unpkg.com/aframe-environment-component@1.2.0/dist/aframe-environment-component.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.1/dist/aframe-extras.min.js"></script>
    <script src="resources/a_frame_script.js"></script>
    <script defer src="resources/Inside/inside_main_script.js" type="text/javascript"></script>
    <title>Interior</title>
</head>

<body onload="setUserName()">
    <!-- Escena de a-frame -->
    <a-scene escena id="myScene" fog="none" vr-mode-ui="enabled: false">

        <!-- Assets manager -->
        <a-assets>
            <!-- Modelos -->
            <a-asset-item id="player" src="resources/Models/Avatar_animado.glb"></a-asset-item>
            <a-asset-item id="habitacion" src="resources/Models/Modelos_interior/Habitacion.glb"></a-asset-item>
            <a-asset-item id="luces" src="resources/Models/Modelos_interior/Lamparas.glb"></a-asset-item>
            <a-asset-item id="mesa_01" src="resources/Models/Modelos_interior/Mesa_01.glb"></a-asset-item>
            <a-asset-item id="mesa_02" src="resources/Models/Modelos_interior/Mesa_02.glb"></a-asset-item>
            <a-asset-item id="mesa_03" src="resources/Models/Modelos_interior/Mesa_03.glb"></a-asset-item>
            <a-asset-item id="silla_01" src="resources/Models/Modelos_interior/Silla_01.glb"></a-asset-item>
            <a-asset-item id="silla_02" src="resources/Models/Modelos_interior/Silla_02.glb"></a-asset-item>
            <a-asset-item id="computador_01" src="resources/Models/Modelos_interior/PC_01.glb"></a-asset-item>
            <a-asset-item id="computador_02" src="resources/Models/Modelos_interior/PC_02.glb"></a-asset-item>
            <a-asset-item id="caja_arroz" src="resources/Models/Modelos_interior/Caja_arroz.glb"></a-asset-item>
            <a-asset-item id="caja_chocolate_01" src="resources/Models/Modelos_interior/Caja_chocolate_01.glb"></a-asset-item>
            <a-asset-item id="caja_chocolate_02" src="resources/Models/Modelos_interior/Caja_chocolate_02.glb"></a-asset-item>
            <a-asset-item id="caja_refresco" src="resources/Models/Modelos_interior/Caja_refresco.glb"></a-asset-item>
            <a-asset-item id="barra_chocolate_01" src="resources/Models/Modelos_interior/Barra_01.glb"></a-asset-item>
            <a-asset-item id="barra_chocolate_02" src="resources/Models/Modelos_interior/Barra_02.glb"></a-asset-item>
            <a-asset-item id="barra_chocolate_03" src="resources/Models/Modelos_interior/Barra_03.glb"></a-asset-item>
            <a-asset-item id="barra_chocolate_04" src="resources/Models/Modelos_interior/Barra_04.glb"></a-asset-item>
            <a-asset-item id="pitillo_01" src="resources/Models/Modelos_interior/Pitillo_01.glb"></a-asset-item>
            <a-asset-item id="pitillo_02" src="resources/Models/Modelos_interior/Pitillo_02.glb"></a-asset-item>
            <a-asset-item id="pitillo_03" src="resources/Models/Modelos_interior/Pitillo_03.glb"></a-asset-item>
            <a-asset-item id="pitillo_04" src="resources/Models/Modelos_interior/Pitillo_04.glb"></a-asset-item>
            <a-asset-item id="pitillo_05" src="resources/Models/Modelos_interior/Pitillo_05.glb"></a-asset-item>
            <a-asset-item id="pitillo_06" src="resources/Models/Modelos_interior/Pitillo_06.glb"></a-asset-item>
            <a-asset-item id="pitillo_07" src="resources/Models/Modelos_interior/Pitillo_07.glb"></a-asset-item>
            <a-asset-item id="pitillo_08" src="resources/Models/Modelos_interior/Pitillo_08.glb"></a-asset-item>
            <a-asset-item id="pitillo_09" src="resources/Models/Modelos_interior/Pitillo_09.glb"></a-asset-item>
            <a-asset-item id="metro" src="resources/Models/Modelos_interior/Metro.glb"></a-asset-item>
            <a-asset-item id="calibre" src="resources/Models/Modelos_interior/Calibre.glb"></a-asset-item>
            <a-asset-item id="balanza" src="resources/Models/Modelos_interior/Balanza.glb"></a-asset-item>
            <a-asset-item id="poster" src="resources/Models/Modelos_interior/Poster.glb"></a-asset-item>
            <a-asset-item id="transportadora" src="resources/Models/Modelos_interior/Transportadora.glb"></a-asset-item>

            <!-- Navigation mesh -->
            <a-asset-item id="navigation_mesh" src="resources/Models/Modelos_interior/NavMesh_int.glb"></a-asset-item></a-assets>

        <!-- Forma número 2 para el personaje -->
        <!-- <a-entity id="character" gltf-model="#player" position="-5 0 -6" scale="0.5 0.5 0.5"
            player_controls="turnEnabled: true;" animation-mixer="clip: Idle; loop: repeat">
            <a-entity id="rig" position="0 9 -10" rotation="0 180 0">
                <a-entity id="camera" camera="active:true; far: 1000; near: 0.1; fov: 50;"></a-entity>
            </a-entity>
        </a-entity> -->

        <!-- Usuario -->
        <a-entity id="rig" position="-7.5 0 -9" rotation="0 -135 0" movement-controls="constrainToNavMesh: true; speed: 0.3">
            <a-entity id="camera" camera="active:true; far: 1000; near: 0.1; fov: 35;" position="0 4.8 0" look-controls cursor="rayOrigin: mouse" raycaster="near: 1;far: 30; objects: .raycasteable"></a-entity>
        </a-entity>

        <!-- Elementos de la oficina -->
        <a-entity id="habitacion" gltf-model="#habitacion" textura-oficina scale="0.5 0.5 0.5"></a-entity>
        <a-entity id="lamparas" gltf-model="#luces" textura-oficina scale="0.5 0.5 0.5"></a-entity>
        <a-entity id="mesa_01" gltf-model="#mesa_01" textura-oficina scale="0.5 0.5 0.5"></a-entity>
        <a-entity id="mesa_02" gltf-model="#mesa_02" textura-oficina scale="0.5 0.5 0.5"></a-entity>
        <a-entity id="mesa_03" gltf-model="#mesa_03" textura-oficina scale="0.5 0.5 0.5"></a-entity>
        <a-entity id="silla_01" gltf-model="#silla_01" textura-oficina scale="0.5 0.5 0.5"></a-entity>
        <a-entity id="silla_02" gltf-model="#silla_02" textura-oficina scale="0.5 0.5 0.5"></a-entity>
        <a-entity id="computador_01" gltf-model="#computador_01" textura-oficina scale="0.5 0.5 0.5"></a-entity>
        <a-entity id="computador_02" gltf-model="#computador_02" textura-oficina scale="0.5 0.5 0.5"></a-entity>
        <a-entity id="caja_arroz" gltf-model="#caja_arroz" textura-oficina scale="0.5 0.5 0.5"></a-entity>
        <a-entity id="caja_chocolate_01" gltf-model="#caja_chocolate_01" textura-oficina scale="0.5 0.5 0.5"></a-entity>
        <a-entity id="caja_chocolate_02" gltf-model="#caja_chocolate_02" textura-oficina scale="0.5 0.5 0.5"></a-entity>
        <a-entity id="caja_refresco" gltf-model="#caja_refresco" textura-oficina scale="0.5 0.5 0.5"></a-entity>
        <a-entity id="barra_01" gltf-model="#barra_chocolate_01" textura-oficina scale="0.5 0.5 0.5"></a-entity>
        <a-entity id="barra_02" gltf-model="#barra_chocolate_02" textura-oficina scale="0.5 0.5 0.5"></a-entity>
        <a-entity id="barra_03" gltf-model="#barra_chocolate_03" textura-oficina scale="0.5 0.5 0.5"></a-entity>
        <a-entity id="barra_04" gltf-model="#barra_chocolate_04" textura-oficina scale="0.5 0.5 0.5"></a-entity>
        <a-entity id="pitillo_01" gltf-model="#pitillo_01" textura-oficina scale="0.5 0.5 0.5"></a-entity>
        <a-entity id="pitillo_02" gltf-model="#pitillo_02" textura-oficina scale="0.5 0.5 0.5"></a-entity>
        <a-entity id="pitillo_03" gltf-model="#pitillo_03" textura-oficina scale="0.5 0.5 0.5"></a-entity>
        <a-entity id="pitillo_04" gltf-model="#pitillo_04" textura-oficina scale="0.5 0.5 0.5"></a-entity>
        <a-entity id="pitillo_05" gltf-model="#pitillo_05" textura-oficina scale="0.5 0.5 0.5"></a-entity>
        <a-entity id="pitillo_06" gltf-model="#pitillo_06" textura-oficina scale="0.5 0.5 0.5"></a-entity>
        <a-entity id="pitillo_07" gltf-model="#pitillo_07" textura-oficina scale="0.5 0.5 0.5"></a-entity>
        <a-entity id="pitillo_08" gltf-model="#pitillo_08" textura-oficina scale="0.5 0.5 0.5"></a-entity>
        <a-entity id="pitillo_09" gltf-model="#pitillo_09" textura-oficina scale="0.5 0.5 0.5"></a-entity>
        <a-entity id="metro" gltf-model="#metro" textura-oficina scale="0.5 0.5 0.5"></a-entity>
        <a-entity id="calibre" gltf-model="#calibre" textura-oficina scale="0.5 0.5 0.5"></a-entity>
        <a-entity id="balanza" gltf-model="#balanza" scale="0.5 0.5 0.5"></a-entity>
        <a-entity id="poster" gltf-model="#poster" textura-oficina scale="0.5 0.5 0.5"></a-entity>
        <a-entity id="transportadora" gltf-model="#transportadora" textura-oficina scale="0.5 0.5 0.5"></a-entity>
        <a-entity id="taskSign" onclick="responseToParent()" geometry="primitive: plane; height: 1.5; width: 1.5" info-sign position="0.6 5.2 7.8" class="raycasteable"></a-entity>

        <!-- Navigation mesh -->
        <a-entity gltf-model="#navigation_mesh" scale="0.5 0.5 0.5" nav-mesh visible="false"></a-entity>

    </a-scene>

    <!-- Normal HTML -->

    <!-- Pagina de carga -->
    <div id="landing" class="o-landing">
        <div class="o-loadingContainer">
            <div id="loader" class="o-loader"></div>
        </div>
    </div>

    <!-- Cabecera -->
    <div class="o-header">
        <h2 id="studentName">Aplicación</h2>
        <div class="o-optionsBtns">
            <div id="infoButton" class="o-crcButton" onclick="reveal()">
                <span id="infoIcon" class="material-icons" style="font-size:24px;">help_outline</span>
            </div>
            <div class="o-sound" onmouseover="volumeControl()" onmouseout="quitVolumeControl()">
                <div id="soundButton" class="o-crcButton" onclick="updateSound()">
                    <span id="soundIcon" class="material-icons" style="font-size:24px;">volume_off</span>
                </div>
                <input id="volumeSlider" type="range" min="0" max="100" value="50" class="o-volumeSlider">
            </div>
            <div id="exitButton" class="o-crcButton" onclick="exitVirtualEnvironment()">
                <span id="exitIcon" class="material-icons" style="font-size:24px;">exit_to_app</span>
            </div>
        </div>
    </div>
    <audio id="factorySound" loop>
        <source src="resources/Audio_files/Habitacion.ogg" type="audio/ogg">
    </audio>

    <!-- Información de los controles -->
    <div id="controlsContainer" class="o-controlsInfo">
        <div class="o-keysInfo">
            <p>Usa alguna de las siguientes combinaciones de teclas para moverte por el entorno</p>
            <div class="o-keyOptions">
                <div class="o-keys">
                    <div class="o-key">A</div>
                    <div class="o-up">
                        <div class="o-key">W</div>
                        <div class="o-key">S</div>
                    </div>
                    <div class="o-key">D</div>
                </div>
                <div class="o-keys">
                    <div class="o-key">&#129080</div>
                    <div class="o-up">
                        <div class="o-key">&#129081</div>
                        <div class="o-key">&#129083</div>
                    </div>
                    <div class="o-key">&#129082</div>
                </div>
            </div>
        </div>
        <div class="o-mouseInfo">
            <p>Usa tu mouse o touchpad para rotar la vista</p>
            <div class="o-mouseMove">
                <span id="mouseIcon" class="material-icons o-mouseIcon" style="font-size:36px;">touch_app</span>
            </div>
        </div>
    </div>

</body>

</html>